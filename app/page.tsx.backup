'use client'

import { useState, useEffect, useRef } from 'react'
import Image from 'next/image'

export default function AanvraagPage() {
  const scrollContainerRef = useRef<HTMLDivElement>(null)
  
  const [formData, setFormData] = useState({
    // Klant gegevens
    naam: '',
    email: '',
    telefoon: '',
    
    // Aanvraag type
    aanvraagType: '', // 'reparatie', 'onderhoud', 'beide', 'offerte', 'bel_afspraak'
    
    // Fiets informatie
    fietsMerk: '',
    fietsModel: '',
    fietsJaar: '',
    
    // Probleem/onderhoud
    probleem: '',
    beschrijving: '',
    foto: null as File | null,
    
    // Locatie
    locatieType: '', // 'op_locatie', 'in_winkel'
    adres: '',
    postcode: '',
    plaats: '',
    
    // Onderhoudsbeurt specifiek
    onderhoudsbeurtType: '', // 'klein', 'groot', 'winter', 'zomer'
    onderhoudsbeurtPakket: '', // 'basic', 'premium', 'deluxe'
    
    // Extra informatie
    voorkeurDatum: '',
    voorkeurTijd: '',
    opmerkingen: ''
  })

  const [submitting, setSubmitting] = useState(false)
  const [success, setSuccess] = useState(false)
  const [error, setError] = useState<string | null>(null)
  const [showWelcomeModal, setShowWelcomeModal] = useState(false)

  // Show welcome modal on page load
  useEffect(() => {
    const hasSeenWelcome = localStorage.getItem('fatbikehulp-welcome-seen')
    if (!hasSeenWelcome) {
      setShowWelcomeModal(true)
    }
  }, [])

  // Auto-scroll reviews
  useEffect(() => {
    const scrollContainer = scrollContainerRef.current
    if (!scrollContainer) return

    let scrollPosition = 0
    let animationId: number

    const scroll = () => {
      scrollPosition += 0.2 // Adjust speed here (lower = slower)
      
      if (scrollPosition >= scrollContainer.scrollWidth - scrollContainer.clientWidth) {
        scrollPosition = 0
      }
      
      scrollContainer.scrollLeft = scrollPosition
      animationId = requestAnimationFrame(scroll)
    }

    // Start scrolling after a short delay
    const timeoutId = setTimeout(() => {
      animationId = requestAnimationFrame(scroll)
    }, 2000)

    // Pause on hover
    const handleMouseEnter = () => {
      cancelAnimationFrame(animationId)
    }

    const handleMouseLeave = () => {
      animationId = requestAnimationFrame(scroll)
    }

    scrollContainer.addEventListener('mouseenter', handleMouseEnter)
    scrollContainer.addEventListener('mouseleave', handleMouseLeave)

    return () => {
      clearTimeout(timeoutId)
      cancelAnimationFrame(animationId)
      scrollContainer.removeEventListener('mouseenter', handleMouseEnter)
      scrollContainer.removeEventListener('mouseleave', handleMouseLeave)
    }
  }, [])

  const handleCloseWelcomeModal = () => {
    setShowWelcomeModal(false)
    localStorage.setItem('fatbikehulp-welcome-seen', 'true')
  }

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value } = e.target
    setFormData(prev => ({
      ...prev,
      [name]: value
    }))
  }

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0] || null
    setFormData(prev => ({
      ...prev,
      foto: file
    }))
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setSubmitting(true)
    setError(null)

    try {
      // Bereid data voor voor lokale API
      const reparatieData = {
        klant_naam: formData.naam,
        klant_email: formData.email,
        klant_telefoon: formData.telefoon,
        aanvraag_type: formData.aanvraagType as 'reparatie' | 'onderhoud' | 'beide' | 'offerte' | 'bel_afspraak',
        fiets_merk: formData.fietsMerk,
        fiets_model: formData.fietsModel,
        fiets_jaar: formData.fietsJaar,
        probleem: formData.probleem,
        beschrijving: formData.beschrijving,
        onderhoudsbeurt_type: formData.onderhoudsbeurtType as 'klein' | 'groot' | 'winter' | 'zomer' | undefined,
        onderhoudsbeurt_pakket: formData.onderhoudsbeurtPakket as 'basic' | 'premium' | 'deluxe' | undefined,
        locatie_type: formData.locatieType as 'op_locatie' | 'in_winkel',
        adres: formData.adres,
        postcode: formData.postcode,
        plaats: formData.plaats,
        voorkeur_datum: formData.voorkeurDatum,
        voorkeur_tijd: formData.voorkeurTijd,
        opmerkingen: formData.opmerkingen
      }

      // Stuur data naar lokale API
      const response = await fetch('/api/reparaties', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(reparatieData),
      })

      if (!response.ok) {
        throw new Error('Failed to submit form')
      }

      const result = await response.json()
      
      if (result.success) {
        // Send confirmation email to customer
        try {
          const emailResponse = await fetch('/api/send-email', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              customerEmail: formData.email,
              customerName: formData.naam,
              reparatieData: {
                serviceType: formData.aanvraagType,
                bikeBrand: formData.fietsMerk,
                bikeModel: formData.fietsModel,
                location: formData.locatieType,
                preferredDate: formData.voorkeurDatum,
                preferredTime: formData.voorkeurTijd,
                notes: formData.opmerkingen
              }
            }),
          })

          if (!emailResponse.ok) {
            console.warn('Failed to send confirmation email, but form was submitted successfully')
          }
        } catch (emailError) {
          console.warn('Email sending failed:', emailError)
          // Don't fail the form submission if email fails
        }

        // Send data to Zapier webhook
        try {
          const zapierResponse = await fetch('https://hooks.zapier.com/hooks/catch/20451847/u5jli2b/', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              // Customer info
              klant_naam: formData.naam,
              klant_email: formData.email,
              klant_telefoon: formData.telefoon,
              
              // Request type
              aanvraag_type: formData.aanvraagType,
              
              // Bike info
              fiets_merk: formData.fietsMerk,
              fiets_model: formData.fietsModel,
              fiets_jaar: formData.fietsJaar,
              
              // Problem/description
              probleem: formData.probleem,
              beschrijving: formData.beschrijving,
              
              // Location
              locatie_type: formData.locatieType,
              adres: formData.adres,
              postcode: formData.postcode,
              plaats: formData.plaats,
              
              // Maintenance specific
              onderhoudsbeurt_type: formData.onderhoudsbeurtType,
              onderhoudsbeurt_pakket: formData.onderhoudsbeurtPakket,
              
              // Preferences
              voorkeur_datum: formData.voorkeurDatum,
              voorkeur_tijd: formData.voorkeurTijd,
              opmerkingen: formData.opmerkingen,
              
              // Metadata
              timestamp: new Date().toISOString(),
              source: 'fatbikehulp_crm'
            }),
          })

          if (zapierResponse.ok) {
            console.log('âœ… Data verzonden naar Zapier webhook')
          } else {
            console.warn('âš ï¸ Zapier webhook response niet OK:', zapierResponse.status)
          }
        } catch (zapierError) {
          console.warn('âš ï¸ Zapier webhook sending failed:', zapierError)
          // Don't fail the form submission if Zapier fails
        }

        setSuccess(true)
      } else {
        throw new Error('Failed to save data')
      }
    } catch (err) {
      console.error('Error submitting form:', err)
      setError('Er is een fout opgetreden. Probeer het opnieuw.')
    } finally {
      setSubmitting(false)
    }
  }

  const resetForm = () => {
    setFormData({
      naam: '',
      email: '',
      telefoon: '',
      aanvraagType: '',
      fietsMerk: '',
      fietsModel: '',
      fietsJaar: '',
      probleem: '',
      beschrijving: '',
      foto: null,
      locatieType: '',
      adres: '',
      postcode: '',
      plaats: '',
      onderhoudsbeurtType: '',
      onderhoudsbeurtPakket: '',
      voorkeurDatum: '',
      voorkeurTijd: '',
      opmerkingen: ''
    })
    setSuccess(false)
    setError(null)
  }

  if (success) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
        <div className="max-w-md w-full space-y-8">
          <div className="text-center">
            <div className="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
              <svg className="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <h2 className="text-3xl font-extrabold text-gray-900 mb-4">
              Aanvraag ontvangen!
            </h2>
            <p className="text-gray-600 mb-6">
              Bedankt voor je aanvraag. We nemen zo snel mogelijk contact met je op.
            </p>
            <button
              onClick={resetForm}
              className="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#ff6b35] hover:bg-[#e55a2b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ff6b35]"
            >
              Nieuwe aanvraag
            </button>
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-gray-50 py-4 sm:py-8 px-2 sm:px-4 lg:px-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="text-center mb-6 sm:mb-8">
          <div className="flex justify-center mb-3 sm:mb-4">
            <img 
              src="/logo.png" 
              alt="Logo" 
              className="h-12 sm:h-16 lg:h-20 w-auto"
            />
          </div>
          
          {/* Trustpilot Reviews Section */}
          <div className="mb-6 sm:mb-8">
            <div className="flex items-center justify-center mb-4 space-x-2">
              <span className="font-semibold text-gray-900">4.8/5</span>
              <span className="text-gray-500">op</span>
              <div className="flex items-center space-x-1">
                <img 
                  src="/trustpilot-single-star.png" 
                  alt="Trustpilot star" 
                  className="h-5 sm:h-6 w-auto"
                />
                <span className="font-bold text-gray-900">Trustpilot</span>
              </div>
            </div>
            
            {/* Scrollable Reviews Container */}
            <div className="relative">
              {/* Scroll hint gradient - left */}
              <div className="absolute left-0 top-0 bottom-0 w-8 bg-gradient-to-r from-gray-50 to-transparent z-10 pointer-events-none"></div>
              
              {/* Scroll hint gradient - right */}
              <div className="absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-gray-50 to-transparent z-10 pointer-events-none"></div>
              
              <div ref={scrollContainerRef} className="overflow-x-auto scrollbar-hide">
                <div className="flex space-x-4 px-4 pb-4">
                  {/* Review 1 */}
                  <div className="flex-none w-72 bg-white rounded-lg shadow-md p-3">
                    <div className="flex items-center justify-center mb-1">
                      <img 
                        src="/trustpilot-stars.png" 
                        alt="5 sterren" 
                        className="h-4 w-auto"
                      />
                      <span className="ml-2 text-xs text-gray-500">2 dagen geleden</span>
                    </div>
                    <h4 className="font-semibold text-sm mb-1 text-center">Snel ter plekke!</h4>
                    <p className="text-sm text-gray-600 mb-1 text-center">
                      Kwam langs voor reparatie. Binnen uur gefixt!
                    </p>
                    <p className="text-xs text-gray-500 text-center">- Mark de Vries, Amsterdam</p>
                  </div>
                  
                  {/* Review 2 */}
                  <div className="flex-none w-72 bg-white rounded-lg shadow-md p-3">
                    <div className="flex items-center justify-center mb-1">
                      <img 
                        src="/trustpilot-stars.png" 
                        alt="5 sterren" 
                        className="h-4 w-auto"
                      />
                      <span className="ml-2 text-xs text-gray-500">1 week geleden</span>
                    </div>
                    <h4 className="font-semibold text-sm mb-1 text-center">Jaarlijks onderhoud thuis</h4>
                    <p className="text-sm text-gray-600 mb-1 text-center">
                      Complete beurt aan huis. Zeer professioneel!
                    </p>
                    <p className="text-xs text-gray-500 text-center">- Linda Bakker, Utrecht</p>
                  </div>
                  
                  {/* Review 3 */}
                  <div className="flex-none w-72 bg-white rounded-lg shadow-md p-3">
                    <div className="flex items-center justify-center mb-1">
                      <img 
                        src="/trustpilot-stars.png" 
                        alt="5 sterren" 
                        className="h-4 w-auto"
                      />
                      <span className="ml-2 text-xs text-gray-500">2 weken geleden</span>
                    </div>
                    <h4 className="font-semibold text-sm mb-1 text-center">Onderhoudsbeurt op locatie</h4>
                    <p className="text-sm text-gray-600 mb-1 text-center">
                      Op kantoor langsgekomen. Super handig!
                    </p>
                    <p className="text-xs text-gray-500 text-center">- Johan Smit, Den Haag</p>
                  </div>
                  
                  {/* Review 4 */}
                  <div className="flex-none w-72 bg-white rounded-lg shadow-md p-3">
                    <div className="flex items-center justify-center mb-1">
                      <img 
                        src="/trustpilot-stars.png" 
                        alt="5 sterren" 
                        className="h-4 w-auto"
                      />
                      <span className="ml-2 text-xs text-gray-500">3 weken geleden</span>
                    </div>
                    <h4 className="font-semibold text-sm mb-1 text-center">Fatbike specialist!</h4>
                    <p className="text-sm text-gray-600 mb-1 text-center">
                      Kennen fatbikes door en door. Top service!
                    </p>
                    <p className="text-xs text-gray-500 text-center">- Sandra Jansen, Rotterdam</p>
                  </div>
                  
                  {/* Review 5 */}
                  <div className="flex-none w-72 bg-white rounded-lg shadow-md p-3">
                    <div className="flex items-center justify-center mb-1">
                      <img 
                        src="/trustpilot-stars.png" 
                        alt="5 sterren" 
                        className="h-4 w-auto"
                      />
                      <span className="ml-2 text-xs text-gray-500">1 maand geleden</span>
                    </div>
                    <h4 className="font-semibold text-sm mb-1 text-center">Binnen 24 uur geholpen</h4>
                    <p className="text-sm text-gray-600 mb-1 text-center">
                      Volgende dag al langs voor onderhoud!
                    </p>
                    <p className="text-xs text-gray-500 text-center">- Peter van Dijk, Eindhoven</p>
                  </div>
                  
                  {/* Review 6 */}
                  <div className="flex-none w-72 bg-white rounded-lg shadow-md p-3">
                    <div className="flex items-center justify-center mb-1">
                      <img 
                        src="/trustpilot-stars.png" 
                        alt="5 sterren" 
                        className="h-4 w-auto"
                      />
                      <span className="ml-2 text-xs text-gray-500">1 maand geleden</span>
                    </div>
                    <h4 className="font-semibold text-sm mb-1 text-center">Winterbeurt aan huis</h4>
                    <p className="text-sm text-gray-600 mb-1 text-center">
                      Fiets winterklaar gemaakt. Heel fijn!
                    </p>
                    <p className="text-xs text-gray-500 text-center">- Monique Visser, Groningen</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <h1 className="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-gray-900 mb-2 sm:mb-4 px-4">
            Reparatie of Onderhoudsbeurt Aanvragen
          </h1>
          <p className="text-sm sm:text-base lg:text-lg text-gray-600 max-w-2xl mx-auto px-4">
            Vul het formulier in en we nemen zo snel mogelijk contact met je op voor een afspraak.
          </p>
        </div>

        <form onSubmit={handleSubmit} className="space-y-4 sm:space-y-6 lg:space-y-8">
          {/* Klant gegevens */}
          <div className="bg-white shadow rounded-lg p-4 sm:p-6">
            <h2 className="text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center">
              <svg className="w-5 h-5 sm:w-6 sm:h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
              Jouw gegevens
            </h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
              <div>
                <label htmlFor="naam" className="block text-sm font-medium text-gray-700 mb-1">
                  Volledige naam *
                </label>
                <input
                  type="text"
                  id="naam"
                  name="naam"
                  required
                  value={formData.naam}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                  placeholder="Jan de Vries"
                />
              </div>
              <div>
                <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-1">
                  E-mailadres *
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  value={formData.email}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                  placeholder="jan@voorbeeld.nl"
                />
              </div>
              <div>
                <label htmlFor="telefoon" className="block text-sm font-medium text-gray-700 mb-1">
                  Telefoonnummer *
                </label>
                <input
                  type="tel"
                  id="telefoon"
                  name="telefoon"
                  required
                  value={formData.telefoon}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                  placeholder="06-12345678"
                />
              </div>
            </div>
          </div>

          {/* Aanvraag type */}
          <div className="bg-white shadow rounded-lg p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center">
              <svg className="w-6 h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              Wat heb je nodig?
            </h2>
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4">
          <label className={`relative cursor-pointer rounded-lg p-3 sm:p-4 border-2 transition-all ${
                formData.aanvraagType === 'reparatie' 
                  ? 'border-[#ff6b35] bg-[#fff4f0]' 
                  : 'border-gray-200 hover:border-gray-300'
              }`}>
                <input
                  type="radio"
                  name="aanvraagType"
                  value="reparatie"
                  checked={formData.aanvraagType === 'reparatie'}
                  onChange={handleInputChange}
                  className="sr-only"
                />
                <div className="text-center">
                  <svg className="w-8 h-8 mx-auto mb-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                  <div className="font-medium text-gray-900">Reparatie</div>
                  <div className="text-sm text-gray-500">Fiets heeft een probleem</div>
                </div>
              </label>

              <label className={`relative cursor-pointer rounded-lg p-4 border-2 transition-all ${
                formData.aanvraagType === 'onderhoud' 
                  ? 'border-[#ff6b35] bg-[#fff4f0]' 
                  : 'border-gray-200 hover:border-gray-300'
              }`}>
                <input
                  type="radio"
                  name="aanvraagType"
                  value="onderhoud"
                  checked={formData.aanvraagType === 'onderhoud'}
                  onChange={handleInputChange}
                  className="sr-only"
                />
                <div className="text-center">
                  <svg className="w-8 h-8 mx-auto mb-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <div className="font-medium text-gray-900">Onderhoudsbeurt</div>
                  <div className="text-sm text-gray-500">Preventief onderhoud</div>
                </div>
              </label>

              <label className={`relative cursor-pointer rounded-lg p-4 border-2 transition-all ${
                formData.aanvraagType === 'beide' 
                  ? 'border-[#ff6b35] bg-[#fff4f0]' 
                  : 'border-gray-200 hover:border-gray-300'
              }`}>
                <input
                  type="radio"
                  name="aanvraagType"
                  value="beide"
                  checked={formData.aanvraagType === 'beide'}
                  onChange={handleInputChange}
                  className="sr-only"
                />
                <div className="text-center">
                  <svg className="w-8 h-8 mx-auto mb-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                  </svg>
                  <div className="font-medium text-gray-900">Beide</div>
                  <div className="text-sm text-gray-500">Reparatie + onderhoud</div>
                </div>
              </label>

              <label className={`relative cursor-pointer rounded-lg p-4 border-2 transition-all ${
                formData.aanvraagType === 'offerte' 
                  ? 'border-[#ff6b35] bg-[#fff4f0]' 
                  : 'border-gray-200 hover:border-gray-300'
              }`}>
                <input
                  type="radio"
                  name="aanvraagType"
                  value="offerte"
                  checked={formData.aanvraagType === 'offerte'}
                  onChange={handleInputChange}
                  className="sr-only"
                />
                <div className="text-center">
                  <svg className="w-8 h-8 mx-auto mb-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                  <div className="font-medium text-gray-900">Offerte aanvragen</div>
                  <div className="text-sm text-gray-500">Vrijblijvend</div>
                </div>
              </label>

              <label className={`relative cursor-pointer rounded-lg p-4 border-2 transition-all ${
                formData.aanvraagType === 'bel_afspraak' 
                  ? 'border-[#ff6b35] bg-[#fff4f0]' 
                  : 'border-gray-200 hover:border-gray-300'
              }`}>
                <input
                  type="radio"
                  name="aanvraagType"
                  value="bel_afspraak"
                  checked={formData.aanvraagType === 'bel_afspraak'}
                  onChange={handleInputChange}
                  className="sr-only"
                />
                <div className="text-center">
                  <svg className="w-8 h-8 mx-auto mb-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                  </svg>
                  <div className="font-medium text-gray-900">Bel afspraak</div>
                  <div className="text-sm text-gray-500">Wij bellen je terug</div>
                </div>
              </label>
            </div>
          </div>

          {/* Onderhoudsbeurt pakketten (alleen bij onderhoud) */}
          {formData.aanvraagType === 'onderhoud' || formData.aanvraagType === 'beide' ? (
            <div className="bg-white shadow rounded-lg p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                <svg className="w-6 h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Kies je onderhoudsbeurt pakket
              </h2>
              <p className="text-gray-600 mb-6">Door heel Nederland ðŸ‡³ðŸ‡±</p>
              
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                {/* BASIC Pakket */}
                <label className={`relative cursor-pointer rounded-lg p-6 border-2 transition-all ${
                  formData.onderhoudsbeurtPakket === 'basic' 
                    ? 'border-[#ff6b35] bg-[#fff4f0]' 
                    : 'border-gray-200 hover:border-gray-300'
                }`}>
                  <input
                    type="radio"
                    name="onderhoudsbeurtPakket"
                    value="basic"
                    checked={formData.onderhoudsbeurtPakket === 'basic'}
                    onChange={handleInputChange}
                    className="sr-only"
                  />
                  <div className="text-center">
                    <h3 className="text-xl font-bold text-gray-900 mb-2">BASIC</h3>
                    <div className="mb-4">
                      <span className="text-lg text-gray-500 line-through">â‚¬169</span>
                      <span className="text-2xl font-bold text-red-600 ml-2">â‚¬129</span>
                    </div>
                    <div className="space-y-2 text-sm text-left">
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Ketting smeren en remmen afstellen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        De Fatbike helemaal nalopen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Alle moeren, bouten, trapas, wielas strak draaien
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        In de werkplaats binnen 45 minuten onderhouden
                      </div>
                    </div>
                  </div>
                </label>

                {/* PREMIUM Pakket */}
                <label className={`relative cursor-pointer rounded-lg p-6 border-2 transition-all bg-teal-50 ${
                  formData.onderhoudsbeurtPakket === 'premium' 
                    ? 'border-[#ff6b35] bg-[#fff4f0]' 
                    : 'border-gray-200 hover:border-gray-300'
                }`}>
                  <input
                    type="radio"
                    name="onderhoudsbeurtPakket"
                    value="premium"
                    checked={formData.onderhoudsbeurtPakket === 'premium'}
                    onChange={handleInputChange}
                    className="sr-only"
                  />
                  <div className="text-center">
                    <h3 className="text-xl font-bold text-gray-900 mb-2">PREMIUM</h3>
                    <div className="mb-4">
                      <span className="text-lg text-gray-500 line-through">â‚¬289</span>
                      <span className="text-2xl font-bold text-red-600 ml-2">â‚¬159</span>
                    </div>
                    <div className="space-y-2 text-sm text-left">
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Remblokken verwisselen (voor & achter)
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        De Fatbike helemaal nalopen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Alle moeren, bouten, trapas, wielas strak draaien
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        In de werkplaats binnen 45 minuten onderhouden
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Versnellingen afstellen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Accu check
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Verlichting controleren
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Banden oppompen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Kettingsmeren en remmen afstellen
                      </div>
                    </div>
                  </div>
                </label>

                {/* DELUXE Pakket */}
                <label className={`relative cursor-pointer rounded-lg p-6 border-2 transition-all ${
                  formData.onderhoudsbeurtPakket === 'deluxe' 
                    ? 'border-[#ff6b35] bg-[#fff4f0]' 
                    : 'border-gray-200 hover:border-gray-300'
                }`}>
                  <input
                    type="radio"
                    name="onderhoudsbeurtPakket"
                    value="deluxe"
                    checked={formData.onderhoudsbeurtPakket === 'deluxe'}
                    onChange={handleInputChange}
                    className="sr-only"
                  />
                  <div className="text-center">
                    <h3 className="text-xl font-bold text-gray-900 mb-2">DELUXE</h3>
                    <div className="mb-4">
                      <span className="text-lg text-gray-500 line-through">â‚¬309</span>
                      <span className="text-2xl font-bold text-red-600 ml-2">â‚¬229</span>
                    </div>
                    <div className="space-y-2 text-sm text-left">
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Remblokken verwisselen (voor & achter)
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        De Fatbike helemaal nalopen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Alle moeren, bouten, trapas, wielas strak draaien
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Direct op locatie binnen 45 minuten onderhouden
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Versnellingen afstellen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Alle bouten, moeren, trapas, wielas en de ketting insmeren
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Verlichting controleren
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Banden oppompen
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Banden wissel voor & achter
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Reinigen Fatbike (Nieuwstaat maken)
                      </div>
                      <div className="flex items-center">
                        <svg className="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                        Kettingsmeren en remmen afstellen
                      </div>
                    </div>
                  </div>
                </label>
              </div>
              
            </div>
          ) : null}

          {/* Fiets informatie */}
          <div className="bg-white shadow rounded-lg p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center">
              <svg className="w-6 h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
              Fiets informatie
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label htmlFor="fietsMerk" className="block text-sm font-medium text-gray-700 mb-1">
                  Merk *
                </label>
                <input
                  type="text"
                  id="fietsMerk"
                  name="fietsMerk"
                  required
                  value={formData.fietsMerk}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                  placeholder="Gazelle, Batavus, etc."
                />
              </div>
              <div>
                <label htmlFor="fietsModel" className="block text-sm font-medium text-gray-700 mb-1">
                  Model
                </label>
                <input
                  type="text"
                  id="fietsModel"
                  name="fietsModel"
                  value={formData.fietsModel}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                  placeholder="Orange C7, E-go, etc."
                />
              </div>
              <div>
                <label htmlFor="fietsJaar" className="block text-sm font-medium text-gray-700 mb-1">
                  Bouwjaar
                </label>
                <input
                  type="number"
                  id="fietsJaar"
                  name="fietsJaar"
                  value={formData.fietsJaar}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                  placeholder="2020"
                  min="1900"
                  max="2025"
                />
              </div>
            </div>
          </div>

          {/* Probleem beschrijving (alleen bij reparatie) */}
          {formData.aanvraagType === 'reparatie' || formData.aanvraagType === 'beide' ? (
            <div className="bg-white shadow rounded-lg p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                <svg className="w-6 h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                </svg>
                Probleem beschrijving
              </h2>
              <div className="space-y-4">
                <div>
                  <label htmlFor="probleem" className="block text-sm font-medium text-gray-700 mb-1">
                    Korte omschrijving van het probleem *
                  </label>
                  <input
                    type="text"
                    id="probleem"
                    name="probleem"
                    required
                    value={formData.probleem}
                    onChange={handleInputChange}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                    placeholder="Bijv. ketting valt eraf, remmen maken geluid"
                  />
                </div>
                <div>
                  <label htmlFor="beschrijving" className="block text-sm font-medium text-gray-700 mb-1">
                    Uitgebreide beschrijving
                  </label>
                  <textarea
                    id="beschrijving"
                    name="beschrijving"
                    rows={4}
                    value={formData.beschrijving}
                    onChange={handleInputChange}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                    placeholder="Beschrijf het probleem zo gedetailleerd mogelijk..."
                  />
                </div>
                <div>
                  <label htmlFor="foto" className="block text-sm font-medium text-gray-700 mb-1">
                    Foto van het probleem (optioneel)
                  </label>
                  <input
                    type="file"
                    id="foto"
                    name="foto"
                    accept="image/*"
                    onChange={handleFileChange}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                  />
                  {formData.foto && (
                    <p className="mt-1 text-sm text-gray-500">
                      Geselecteerd: {formData.foto.name}
                    </p>
                  )}
                </div>
              </div>
            </div>
          ) : null}


          {/* Locatie keuze */}
          <div className="bg-white shadow rounded-lg p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center">
              <svg className="w-6 h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              Waar wil je de service?
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <label className={`relative cursor-pointer rounded-lg p-6 border-2 transition-all ${
                formData.locatieType === 'in_winkel' 
                  ? 'border-[#ff6b35] bg-[#fff4f0]' 
                  : 'border-gray-200 hover:border-gray-300'
              }`}>
                <input
                  type="radio"
                  name="locatieType"
                  value="in_winkel"
                  checked={formData.locatieType === 'in_winkel'}
                  onChange={handleInputChange}
                  className="sr-only"
                />
                <div className="text-center">
                  <svg className="w-12 h-12 mx-auto mb-3 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                  </svg>
              <div className="font-medium text-gray-900">In de winkel</div>
              <div className="text-sm text-gray-500">Friesland, Joure</div>
                </div>
              </label>

              <label className={`relative cursor-pointer rounded-lg p-6 border-2 transition-all ${
                formData.locatieType === 'op_locatie' 
                  ? 'border-[#ff6b35] bg-[#fff4f0]' 
                  : 'border-gray-200 hover:border-gray-300'
              }`}>
                <input
                  type="radio"
                  name="locatieType"
                  value="op_locatie"
                  checked={formData.locatieType === 'op_locatie'}
                  onChange={handleInputChange}
                  className="sr-only"
                />
                <div className="text-center">
                  <svg className="w-12 h-12 mx-auto mb-3 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                  </svg>
              <div className="font-medium text-gray-900">Op locatie</div>
              <div className="text-sm text-gray-500">Door heel Nederland</div>
                </div>
              </label>
            </div>

            {/* Adres velden (alleen bij op locatie) */}
            {formData.locatieType === 'op_locatie' && (
              <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                <div className="md:col-span-2">
                  <label htmlFor="adres" className="block text-sm font-medium text-gray-700 mb-1">
                    Adres *
                  </label>
                  <input
                    type="text"
                    id="adres"
                    name="adres"
                    required
                    value={formData.adres}
                    onChange={handleInputChange}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                    placeholder="Straatnaam 123"
                  />
                </div>
                <div>
                  <label htmlFor="postcode" className="block text-sm font-medium text-gray-700 mb-1">
                    Postcode *
                  </label>
                  <input
                    type="text"
                    id="postcode"
                    name="postcode"
                    required
                    value={formData.postcode}
                    onChange={handleInputChange}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                    placeholder="1234 AB"
                  />
                </div>
                <div>
                  <label htmlFor="plaats" className="block text-sm font-medium text-gray-700 mb-1">
                    Plaats *
                  </label>
                  <input
                    type="text"
                    id="plaats"
                    name="plaats"
                    required
                    value={formData.plaats}
                    onChange={handleInputChange}
                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                    placeholder="Amsterdam"
                  />
                </div>
              </div>
            )}
          </div>

          {/* Voorkeur datum en tijd */}
          <div className="bg-white shadow rounded-lg p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center">
              <svg className="w-6 h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              Wanneer past het jou?
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label htmlFor="voorkeurDatum" className="block text-sm font-medium text-gray-700 mb-1">
                  Voorkeur datum
                </label>
                <input
                  type="date"
                  id="voorkeurDatum"
                  name="voorkeurDatum"
                  value={formData.voorkeurDatum}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                />
              </div>
              <div>
                <label htmlFor="voorkeurTijd" className="block text-sm font-medium text-gray-700 mb-1">
                  Voorkeur tijd
                </label>
                <select
                  id="voorkeurTijd"
                  name="voorkeurTijd"
                  value={formData.voorkeurTijd}
                  onChange={handleInputChange}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                >
                  <option value="">Selecteer tijd...</option>
                  <option value="ochtend">Ochtend (9:00-12:00)</option>
                  <option value="middag">Middag (12:00-17:00)</option>
                  <option value="avond">Avond (17:00-20:00)</option>
                  <option value="flexibel">Flexibel</option>
                </select>
              </div>
            </div>
          </div>

          {/* Extra opmerkingen */}
          <div className="bg-white shadow rounded-lg p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-4 flex items-center">
              <svg className="w-6 h-6 mr-2 text-[#ff6b35]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 8h10m0 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m0 0v8a2 2 0 002 2h6a2 2 0 002-2V8M9 12h6" />
              </svg>
              Extra opmerkingen
            </h2>
            <div>
              <label htmlFor="opmerkingen" className="block text-sm font-medium text-gray-700 mb-1">
                Heb je nog andere opmerkingen of bijzonderheden?
              </label>
              <textarea
                id="opmerkingen"
                name="opmerkingen"
                rows={3}
                value={formData.opmerkingen}
                onChange={handleInputChange}
                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-[#ff6b35] focus:border-[#ff6b35]"
                placeholder="Bijv. specifieke wensen, toegankelijkheid, etc."
              />
            </div>
          </div>

          {/* Error message */}
          {error && (
            <div className="rounded-md bg-red-50 p-4">
              <div className="flex">
                <div className="ml-3">
                  <h3 className="text-sm font-medium text-red-800">{error}</h3>
                </div>
              </div>
            </div>
          )}

          {/* Submit button */}
          <div className="text-center">
            <button
              type="submit"
              disabled={submitting || !formData.aanvraagType || !formData.locatieType}
              className="w-full px-6 sm:px-8 py-3 sm:py-4 border border-transparent text-base font-medium rounded-md text-white bg-[#ff6b35] hover:bg-[#e55a2b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ff6b35] disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"
            >
              {submitting ? 'Aanvraag wordt verzonden...' : 'Aanvraag versturen'}
            </button>
            <p className="mt-2 text-sm text-gray-500">
              We nemen binnen 24 uur contact met je op
            </p>
          </div>
        </form>

        {/* Footer */}
        <div className="mt-12 text-center">
          <div className="border-t border-gray-200 pt-6">
            <p className="text-xs text-gray-500">
              Fixclan - Professionele fietsreparatie en onderhoud
            </p>
            <p className="text-xs text-gray-400 mt-1">
              Â© 2025 Fixclan. Alle rechten voorbehouden.
            </p>
          </div>
        </div>
      </div>

      {/* WhatsApp Button */}
      <div className="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50">
        <a
          href="https://wa.me/31850604213?text=Hallo%2C%20ik%20heb%20een%20vraag%20over%20fatbike%20reparatie%20of%20onderhoud"
          target="_blank"
          rel="noopener noreferrer"
          className="flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110"
        >
          <svg
            className="w-6 h-6 sm:w-8 sm:h-8"
            fill="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
          </svg>
        </a>
      </div>

      {/* Welcome Modal */}
      {showWelcomeModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 p-4 overflow-y-auto">
          <div className="bg-white rounded-3xl shadow-2xl max-w-lg w-full mx-auto transform transition-all duration-300 scale-100 my-4 sm:my-8 relative">
            {/* Header */}
            <div className="bg-white text-gray-900 p-6 sm:p-8 rounded-t-3xl border-b border-gray-100">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-3 sm:space-x-4">
                    <div className="w-12 h-12 sm:w-14 sm:h-14 bg-[#ff6b35] rounded-2xl flex items-center justify-center">
                      <svg className="w-6 h-6 sm:w-7 sm:h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
                        <path strokeLinecap="round" strokeLinejoin="round" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                        <path strokeLinecap="round" strokeLinejoin="round" d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                      </svg>
                    </div>
                  <div>
                    <h2 className="text-xl sm:text-2xl font-bold text-gray-900">Welkom bij Fatbikehulp</h2>
                    <p className="text-gray-500 text-xs sm:text-sm">Professionele fietsreparatie</p>
                  </div>
                </div>
                <button
                  onClick={handleCloseWelcomeModal}
                  className="text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full"
                >
                  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>
            </div>

            {/* Content */}
            <div className="p-6 sm:p-8 space-y-4 sm:space-y-6">
              <div className="space-y-3 sm:space-y-4">
                <div>
                  <h3 className="font-semibold text-gray-900 text-base sm:text-lg">Reparateurs op locatie</h3>
                  <p className="text-gray-600 text-sm sm:text-base leading-relaxed">Wij komen naar jou toe! Gespecialiseerd in fatbikes en reparaties door heel Nederland.</p>
                </div>

                <div>
                  <h3 className="font-semibold text-gray-900 text-base sm:text-lg">Werkplaats in Joure</h3>
                  <p className="text-gray-600 text-sm sm:text-base leading-relaxed">Je fatbike kan ook naar onze werkplaats in Joure gebracht worden voor uitgebreide reparaties.</p>
                </div>

                <div>
                  <h3 className="font-semibold text-gray-900 text-base sm:text-lg">Snelle Service</h3>
                  <p className="text-gray-600 text-sm sm:text-base leading-relaxed">Contact binnen 24 uur â€¢ Bezoek binnen 1-7 werkdagen â€¢ Partner van GoFatbike.nl</p>
                </div>
              </div>

              <div className="bg-gray-50 rounded-2xl p-4 sm:p-6 mt-4 sm:mt-6">
                <div className="flex items-center space-x-2 sm:space-x-3 mb-2 sm:mb-3">
                  <div className="w-8 h-8 bg-[#ff6b35] rounded-lg flex items-center justify-center">
                    <svg className="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
                      <path strokeLinecap="round" strokeLinejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                  </div>
                  <span className="font-semibold text-gray-900 text-base sm:text-lg">Foutcodes & Vragen</span>
                </div>
                <p className="text-gray-600 text-sm sm:text-base leading-relaxed">Geef eventuele foutcodes of specifieke vragen aan in dit formulier. Wij komen binnen 24 uur met je in contact!</p>
              </div>
            </div>

            {/* Footer */}
            <div className="bg-gray-50 px-6 sm:px-8 py-4 sm:py-6 rounded-b-3xl">
              <button
                onClick={handleCloseWelcomeModal}
                className="w-full border-2 border-[#ff6b35] text-[#ff6b35] hover:bg-[#ff6b35] hover:text-white font-semibold py-3 sm:py-4 px-6 rounded-2xl transition-all duration-200 text-base sm:text-lg"
              >
                Begrepen, ga door!
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
